(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{340:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),e("p",[e("a",{attrs:{href:"https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html#//apple_ref/doc/uid/TP40014216-CH10-ID122",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swift and Objective-C"),e("OutboundLink")],1),t._v(" mix-up")]),e("p",[t._v("a complete "),e("a",{attrs:{href:"https://github.com/acton393/WeexSwiftSample.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),e("OutboundLink")],1)]),t._m(1),t._m(2),t._m(3),t._m(4)])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"swift-in-weex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swift-in-weex"}},[this._v("#")]),this._v(" Swift In Weex")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"extend-module-using-swift"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extend-module-using-swift"}},[this._v("#")]),this._v(" extend module using swift")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("As we export moudle method using macro and calling in runtime, so we can extend module using swift by "),s("code",[this._v("extension")]),s("code",[this._v("bjective-C")]),this._v(" class.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("You can also finish extending module by write an category for swift class in Objective-C class.")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("p",[t._v("new "),e("code",[t._v("WXSwiftTestModule.h/m")]),t._v(" and "),e("code",[t._v("WXSwiftTestModule.swift")]),t._v(" file ï¼Œyou will get a tip as follow during the creation\n"),e("img",{attrs:{src:"http://img3.tbcdn.cn/L1/461/1/b2ed3ee4a966953c0f98a17f34f6f05e7c91cc6b",alt:"img"}}),t._v("\nchoose "),e("code",[t._v("Create Bridging Header")]),t._v(", as we need to access method in "),e("code",[t._v("Objective-C")]),t._v(" in swift file, and the "),e("code",[t._v("Bridging header")]),t._v(" can help us. And the format name of the header file is "),e("code",[t._v("yourTarget-Bridging-Header.h")]),t._v(", and mine is "),e("code",[t._v("WeexDemo-Bridging-Header.h")]),t._v(".")])]),e("li",[e("p",[t._v("implementation in "),e("code",[t._v("WXSwiftTestModule.h/m")])]),e("ul",[e("li",[e("p",[t._v("WXSwiftTestModule.h")]),e("div",{staticClass:"language-swift extra-class"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[t._v("#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Foundation")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Foundation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WeexSDK")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WeexSDK")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n@interface "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WXSwiftTestModule")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSObject")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WXModuleProtocol")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n@end\n")])])])]),e("li",[e("p",[t._v("WXSwiftTestModule.m")]),e("p",[t._v("you can search WeexDemo-Swift.h after building your project, Xcode will generate this file for us.")]),e("p",[t._v("for simulator the file path may be:")]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("weex/ios/playground/DerivedData/WeexDemo/Build/Intermediates/WeexDemo.build/Debug-iphonesimulator/WeexDemo.build/DerivedSources/WeexDemo-Swift.h\n")])])]),e("p",[t._v("export method define in swift file.")]),e("div",{staticClass:"language-swift extra-class"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[t._v("#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WXSwiftTestModule.h"')]),t._v("\n#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WeexDemo-Swift.h"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// you need to import the header to make Objective-C code recognize the method defined in swift file.")]),t._v("\n\n@implementation "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WXSwiftTestModule")]),t._v("\n#pragma clang diagnostic push "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//forbid unknow selector warrning")]),t._v("\n#pragma clang diagnostic ignored "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-Wundeclared-selector"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("WX_EXPORT_METHOD")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("selector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("printSome"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//method name in Swift, you can get the final method name in `WeexDemo-Swift.h` as the convert of Xcode.")]),t._v("\n\n#pragma clang diagnostic pop\n\n@end\n")])])])])])]),e("li",[e("p",[t._v("in Swift\nmake an extension for Objective-C class "),e("code",[t._v("WXSwiftTestModule")]),t._v(", add a method, and then export it in Objective-C, then we can use it in javaScript.")]),e("ul",[e("li",[e("p",[t._v("WXSwiftTestModule.swift")]),e("div",{staticClass:"language-swift extra-class"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Foundation")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WXSwiftTestModule")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("objc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("printSome"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("printSome")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someThing"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("WXModuleCallback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someThing"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someThing"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),e("p",[t._v("we need to expose "),e("code",[t._v("WXSwiftTestModule")]),e("code",[t._v("WXModuleCallback")]),t._v(" in "),e("code",[t._v("WeexDemo-Bridging-Header")]),t._v(" as our "),e("code",[t._v("Objective-C")]),t._v(" need to access them.")]),e("p",[t._v("Attention: Please add the "),e("code",[t._v("@objc")]),t._v(" attribute to the method in the Swift file to avoid the error for the method cannot be found.")]),e("ul",[e("li",[e("p",[t._v("WeexDemo-Bridging-Header.h")]),e("div",{staticClass:"language-swift extra-class"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  Use this file to import your target's public headers that you would like to expose to Swift.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WXSwiftTestModule.h"')]),t._v("\n#"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WeexSDK.h"')]),t._v("\n")])])]),e("p",[t._v("by far we have finished our module using swift.")])])]),e("h3",{attrs:{id:"module-usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#module-usage"}},[t._v("#")]),t._v(" module usage")]),e("ul",[e("li",[e("p",[t._v("register module to WeexSDK")]),e("div",{staticClass:"language-Objective-C extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('[WXSDKEngine registerModule:@"swifter" withClass:[WXSwiftTestModule class]];\n\n')])])])]),e("li",[e("p",[t._v("front-end usage")]),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Swift Module"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("ready")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" swifter "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" weex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'swifter'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      swifter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("printSome")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.taobao.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("param")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nativeLog")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])])])}],!1,null,null,null);s.default=n.exports}}]);