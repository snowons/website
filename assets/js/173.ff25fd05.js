(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{417:function(e,t,s){"use strict";s.r(t);var r=s(0),i=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),s("p",[s("a",{attrs:{href:"https://github.com/weexteam/devtool-iOS-for-Apache-Weex",target:"_blank",rel:"noopener noreferrer"}},[e._v("iOS Devtools for Apache Weex"),s("OutboundLink")],1),e._v(" 是三方插件, 不由 Apache Weex 开发或维护。")])]),s("p",[e._v("iOS Devtools for Apache Weex 能够方便调试 Weex 页面，但此功能离不开 Native 的支持。本章将会详细说明 iOS 端如何接入 iOS Devtools for Apache Weex。")]),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),s("p",[e._v("建议在DEBUG模式下依赖")]),e._m(6),s("p",[e._v("在工程目录的 podfile 添加如下代码")]),e._m(7),s("p",[e._v("可以通过更新本地 podspec repo，pod search 来查询最新版本，在 podfile 文件添加依赖。")]),e._m(8),e._m(9),e._m(10),e._m(11),e._m(12),s("p",[e._v("在相对较大的互联网 App 研发中, framework 静态库被广泛应用，所以推荐使用方法一接入。")]),e._m(13),e._m(14),e._m(15),s("p",[e._v("查看 WXDevtool 头文件如下：")]),e._m(16),e._m(17),e._m(18),s("p",[e._v("如果你的应用中存在扫码功能或即将集成扫码功能，推荐使用该方式进行集成，Demo 地址见: "),s("a",{attrs:{href:"https://github.com/weexteam/weex-devtool-iOS/blob/master/playground/WeexDemo/Scanner/WXScannerVC.m",target:"_blank",rel:"noopener noreferrer"}},[e._v("Playground App"),s("OutboundLink")],1)]),e._m(19),e._m(20),e._m(21),s("p",[e._v("如果你需要直接让你的应用链接上Weex调试工具，你需要通过如下方式进行集成：")]),e._m(22),e._m(23),e._m(24),e._m(25),s("ul",[e._m(26),s("li",[s("p",[e._v("如何添加刷新")]),s("ul",[s("li",[e._v("具体实现可参考 "),s("a",{attrs:{href:"https://github.com/weexteam/weex-devtool-iOS/blob/master/playground/WeexDemo/WXDemoViewController.m",target:"_blank",rel:"noopener noreferrer"}},[e._v("Playground App"),s("OutboundLink")],1),s("code",[e._v("WXDemoViewController.m")]),e._v(" 例子")])]),e._m(27),e._m(28),e._m(29),e._m(30),s("p",[e._v("页面刷新实现，先销毁当前 instance，然后重新创建 instance，举例如下:")]),e._m(31)])]),e._m(32)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"概要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[this._v("#")]),this._v(" 概要")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("iOS 应用接入DevTool")]),t("li",[this._v("和Debug Server 配合使用")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"版本兼容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本兼容"}},[this._v("#")]),this._v(" 版本兼容")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",[s("thead",[s("tr",[s("th",[e._v("WeexSDK")]),s("th",[e._v("WXDevtool")])])]),s("tbody",[s("tr",[s("td",[e._v("0.16.0+")]),s("td",[e._v("0.15.3")])]),s("tr",[s("td",[e._v("0.17.0+")]),s("td",[e._v("0.16.0")])]),s("tr",[s("td",[e._v("0.18.0+")]),s("td",[e._v("0.16.3+")])]),s("tr",[s("td",[e._v("0.19.0+")]),s("td",[e._v("0.17.2+")])]),s("tr",[s("td",[e._v("0.20.0+")]),s("td",[e._v("0.20.0+")])]),s("tr",[s("td",[e._v("0.24.0+")]),s("td",[e._v("0.24.0")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"ios接入指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios接入指南"}},[this._v("#")]),this._v(" iOS接入指南")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"添加依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加依赖"}},[this._v("#")]),this._v(" 添加依赖")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"方法1-cocoapods-依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法1-cocoapods-依赖"}},[this._v("#")]),this._v(" 方法1: cocoapods 依赖")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("source https://github.com/CocoaPods/Specs.git\npod  'WXDevtool', '0.24.0', :configurations => ['Debug']\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"方法二：github-源码依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二：github-源码依赖"}},[this._v("#")]),this._v(" 方法二：github 源码依赖")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[t("p",[t("code",[this._v("git clone git@github.com:weexteam/weex-devtool-iOS.git")])])]),t("li",[t("p",[this._v("如下图示：拖动source目录源文件到目标工程中")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://img.alicdn.com/tps/TB1MXjjNXXXXXXlXpXXXXXXXXXX-795-326.png",alt:"drag"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",{attrs:{start:"3"}},[t("li",[this._v("按照红框中配置勾选")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"http://img.alicdn.com/tps/TB1A518NXXXXXbZXFXXXXXXXXXX-642-154.png",alt:"_"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"集成功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成功能"}},[this._v("#")]),this._v(" 集成功能")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("参考"),t("code",[this._v("PlayGround")]),this._v("中的实现")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('//方法1 pod依赖方式\n#import <WXDevtool/WXDevtool.h>\n\n//方法2 源码依赖方式\n#import "WXDevtool.h"\n\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-object-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("@interface WXDevTool : NSObject\n\n+ (void)setDebug:(BOOL)isDebug;\n\n+ (BOOL)isDebug;\n\n+ (void)launchDevToolDebugWithUrl:(NSString *)url;\n\n@end\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("setDebug")]),this._v("：参数为 "),t("code",[this._v("YES")]),this._v(" 时，直接开启调试模式，反之关闭，使用场景如下所述")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"扫码调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扫码调试"}},[this._v("#")]),this._v(" 扫码调试")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("核心代码为获取扫码链接中的"),t("code",[this._v("_wx_devtool")]),this._v("参数，并将调试工具与调试服务器链接：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-object-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[WXDevTool launchDevToolDebugWithUrl:@"ws://{ip}:{port}/debugProxy/native/{channelid}"];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"直接链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接链接"}},[this._v("#")]),this._v(" 直接链接")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ol",[s("li",[e._v("命令行运行"),s("code",[e._v("weex debug --port 8888 --channelid 1")]),e._v(" 去指定端口号及调试进程ID.")]),s("li",[e._v("添加如下代码到你的应用中，注意替换对应的"),s("code",[e._v("{ip}")]),e._v(","),s("code",[e._v("{port}")]),e._v(","),s("code",[e._v("{channelid}")]),e._v("为你本地的值。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-object-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[WXDevTool setDebug:NO];\n[WXDevTool launchDevToolDebugWithUrl:@"ws://{ip}:{port}/debugProxy/native/{channelid}"];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("如果程序一启动就开启 Weex 调试，"),t("strong",[this._v("需要在 WeexSDK 引擎初始化之前")]),this._v("添加代码，同时需要将Debug开关设置为"),t("code",[this._v("NO")]),this._v("，进入调试界面后再打开"),t("code",[this._v("JS Debug")]),this._v("开关（服务链接时对于纯weex项目会丢失首屏Weex页面的消息导致白屏）。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"附加页面刷新功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附加页面刷新功能"}},[this._v("#")]),this._v(" 附加页面刷新功能")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("p",[this._v("什么场景下需要添加页面刷新功能?")]),t("ul",[t("li",[this._v("切换 JSDebug 开关时刷新页面")]),t("li",[this._v("刷新 Chrome 页面（command+R）")])]),t("p",[this._v("如下图所示，在快速导航功能中需要能够刷新当前weex实例，同时，在切换JSDebug按钮状态时也需要将运行环境会从手机端（JavaScriptCore）切换到 Chrome（V8），这时需要重新初始化 Weex 环境，重新渲染页面。页面渲染是需要接入方在自己的页面添加。")]),t("p",[t("img",{attrs:{src:"https://img.alicdn.com/tfs/TB1cnygJhjaK1RjSZKzXXXVwXXa-1915-999.png",alt:"_debug"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("在 Weex 页面初始化或 "),t("code",[this._v("viewDidLoad")]),this._v(" 方法时添加注册通知，举例如下：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-object-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[[NSNotificationCenter defaultCenter] addObserver:self selector:notificationRefreshInstance: name:@"RefreshInstance" object:nil];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("最后"),t("strong",[this._v("千万记得")]),this._v("在 "),t("code",[this._v("dealloc")]),this._v(" 方法中取消通知，如下所示")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("- (void)dealloc\n{\n    [[NSNotificationCenter defaultCenter] removeObserver:self];\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v(' - (void)render\n  {\n    CGFloat width = self.view.frame.size.width;\n    [_instance destroyInstance];\n    _instance = [[WXSDKInstance alloc] init];\n    _instance.viewController = self;\n    _instance.frame = CGRectMake(self.view.frame.size.width-width, 0, width, _weexHeight);\n\n    __weak typeof(self) weakSelf = self;\n    _instance.onCreate = ^(UIView *view) {\n        [weakSelf.weexView removeFromSuperview];\n        weakSelf.weexView = view;\n        [weakSelf.view addSubview:weakSelf.weexView];\n        UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification,  weakSelf.weexView);\n    };\n    _instance.onFailed = ^(NSError *error) {\n\n    };\n    _instance.renderFinish = ^(UIView *view) {\n        [weakSelf updateInstanceState:WeexInstanceAppear];\n    };\n\n    _instance.updateFinish = ^(UIView *view) {\n    };\n    if (!self.url) {\n        return;\n    }\n    NSURL *URL = [self testURL: [self.url absoluteString]];\n    NSString *randomURL = [NSString stringWithFormat:@"%@?random=%d",URL.absoluteString,arc4random()];\n    [_instance renderWithURL:[NSURL URLWithString:randomURL] options:@{@"bundleUrl":URL.absoluteString} data:nil];\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("em",[this._v("说明：目前版本需要注册的通知名称为固定的 “RefreshInstance”，下个版本会添加用户自定义 name 。")])])}],!1,null,null,null);t.default=i.exports}}]);